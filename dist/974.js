(self.webpackChunkslack_clone=self.webpackChunkslack_clone||[]).push([[974],{9250:(e,t,n)=>{"use strict";n.d(t,{Z:()=>f});var r=n(5692),a=n(8678),o=n(3046),l=n(3564),i=n(9669),c=n.n(i),s=n(7294),u=n(5977),p=n(9249),d=n(5767);function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const f=function(e){var t,n,i=e.show,f=e.onCloseModal,h=e.setShowInviteChannelModal,g=(0,u.UO)(),b=g.workspace,v=g.channel,y=(t=(0,a.Z)(""),n=3,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),x=y[0],w=y[1],k=y[2],E=(0,d.ZP)("/api/users",l.Z).data,C=(0,d.ZP)(E?"/api/workspaces/".concat(b,"/channels/").concat(v,"/members"):null,l.Z).mutate,Z=(0,s.useCallback)((function(e){e.preventDefault(),x&&x.trim()&&c().post("/api/workspaces/".concat(b,"/channels/").concat(v,"/members"),{email:x}).then((function(){C(),h(!1),k("")})).catch((function(e){var t;console.dir(e),p.Am.error(null===(t=e.response)||void 0===t?void 0:t.data,{position:"bottom-center"})}))}),[v,x,C,k,h,b]);return s.createElement(r.Z,{show:i,onCloseModal:f},s.createElement("form",{onSubmit:Z},s.createElement(o.__,{id:"member-label"},s.createElement("span",null,"Invite members"),s.createElement(o.II,{id:"member",value:x,onChange:w})),s.createElement(o.zx,{type:"submit"},"초대하기")))}},4911:(e,t,n)=>{"use strict";n.d(t,{b:()=>a,f:()=>o});var r=n(1574),a=(0,r.Z)("div",{target:"eirknga1"})({name:"3nqusf",styles:"position:fixed;top:0;right:0;left:0;bottom:0;z-index:1000;&>div{position:absolute;display:inline-block;--saf-0:rgba(var(--sk_foreground_low, 29, 28, 29), 0.13);box-shadow:0 0 0 1px var(--saf-0),0 4px 12px 0 rgba(0, 0, 0, 0.12);background-color:rgba(var(--sk_foreground_min_solid, 248, 248, 248), 1);border-radius:6px;user-select:none;min-width:360px;z-index:512;max-height:calc(100vh - 20px);color:rgb(29, 28, 29);}"}),o=(0,r.Z)("button",{target:"eirknga0"})({name:"19gmbxq",styles:"position:absolute;right:10px;top:6px;background:transparent;border:none;font-size:30px;cursor:pointer"})},5692:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(4911),a=n(7294),o=n(1574),l=(0,o.Z)("div",{target:"e1k3qh941"})({name:"10w7pu7",styles:"position:fixed;text-align:center;left:0;bottom:0;top:0;right:0;z-index:1022;&>div{margin-top:200px;display:inline-block;width:440px;background:white;--saf-0:rgba(var(--sk_foreground_low, 29, 28, 29), 0.13);box-shadow:0 0 0 1px var(--saf-0),0 4px 12px 0 rgba(0, 0, 0, 0.12);background-color:rgba(var(--sk_foreground_min_solid, 248, 248, 248), 1);border-radius:6px;user-select:none;max-width:440px;padding:30px 40px 0;z-index:1012;position:relative;}"});(0,o.Z)("button",{target:"e1k3qh940"})({name:"19gmbxq",styles:"position:absolute;right:10px;top:6px;background:transparent;border:none;font-size:30px;cursor:pointer"});const i=function(e){var t=e.show,n=e.children,o=e.onCloseModal,i=(0,a.useCallback)((function(e){e.stopPropagation()}),[]);return t?a.createElement(l,{onClick:o},a.createElement("div",{onClick:i},a.createElement(r.f,{onClick:o},"×"),n)):null}},2951:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=n(6809),a=n.n(r),o=n(7294),l={};const i=function(e){console.log("rerender",e);var t=(0,o.useCallback)((function(){e&&(l[e].disconnect(),delete l[e])}),[e]);return e?(l[e]||(l[e]=a().connect("".concat("http://localhost:3095","/ws-").concat(e),{transports:["websocket"]})),[l[e],t]):[void 0,t]}},9873:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>ee});var r=n(1574),a=(0,r.Z)("button",{target:"e1xnpn9p0"})("background:transparent;border:none;width:26px;height:26px;display:inline-flex;justify-content:center;align-items:center;color:white;margin-left:10px;cursor:pointer;",(function(e){return e.collapse&&"\n    & i {\n      transform: none;\n    }\n  "}),";"),o=n(3564),l=n(7294),i=n(5977),c=n(3727),s=n(5767);const u=function(e){var t=e.channel,n=(0,i.UO)().workspace,r=(0,i.TH)(),a=(0,s.ZP)("/api/users",o.Z,{dedupingInterval:2e3}).data,u=localStorage.getItem("".concat(n,"-").concat(t.name))||0,p=(0,s.ZP)(a?"/api/workspaces/".concat(n,"/channels/").concat(t.name,"/unreads?after=").concat(u):null,o.Z),d=p.data,m=p.mutate;return(0,l.useEffect)((function(){r.pathname==="/workspace/".concat(n,"/channel/").concat(t.name)&&m(0)}),[m,r.pathname,n,t]),l.createElement(c.OL,{key:t.name,activeClassName:"selected",to:"/workspace/".concat(n,"/channel/").concat(t.name)},l.createElement("span",{className:void 0!==d&&d>0?"bold":void 0},"# ",t.name),void 0!==d&&d>0&&l.createElement("span",{className:"count"},d))};function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?d(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const m=function(){var e=(0,i.UO)().workspace,t=(0,s.ZP)("http://localhost:3095/api/users",o.Z,{dedupingInterval:2e3}),n=t.data,r=(t.error,t.revalidate,t.mutate,(0,s.ZP)(n?"http://localhost:3095/api/workspaces/".concat(e,"/channels"):null,o.Z).data),c=p((0,l.useState)(!1),2),d=c[0],m=c[1],f=p((0,l.useState)({}),2),h=(f[0],f[1],(0,l.useCallback)((function(){m((function(e){return!e}))}),[]));return l.createElement(l.Fragment,null,l.createElement("h2",null,l.createElement(a,{collapse:d,onClick:h},l.createElement("i",{className:"c-icon p-channel_sidebar__section_heading_expand p-channel_sidebar__section_heading_expand--show_more_feature c-icon--caret-right c-icon--inherit c-icon--inline","data-qa":"channel-section-collapse","aria-hidden":"true"})),l.createElement("span",null,"Channels")),l.createElement("div",null,!d&&(null==r?void 0:r.map((function(e){return l.createElement(u,{key:e.id,channel:e})})))))},f=function(e){var t=e.member,n=e.isOnline,r=(0,i.UO)().workspace,a=(0,i.TH)(),u=(0,s.ZP)("/api/users",o.Z,{dedupingInterval:2e3}).data,p=localStorage.getItem("".concat(r,"-").concat(t.id))||0,d=(0,s.ZP)(u?"/api/workspaces/".concat(r,"/dms/").concat(t.id,"/unreads?ater=").concat(p):null,o.Z),m=d.data,f=d.mutate;return(0,l.useEffect)((function(){a.pathname==="/workspace/".concat(r,"/dm/").concat(t.id)&&f(0)}),[f,a.pathname,r,t]),l.createElement(c.OL,{key:t.id,activeClassName:"selected",to:"/workspace/".concat(r,"/dm/").concat(t.id)},l.createElement("i",{className:"c-icon p-channel_sidebar__presence_icon p-channel_sidebar__presence_icon--dim_enabled c-presence ".concat(n?"c-presence--active c-icon--presence-online":"c-icon--presence-offline"),"aria-hidden":"true","data-qa":"presence_indicator","data-qa-presence-self":"false","data-qa-presence-active":"false","data-qa-presence-dnd":"false"}),l.createElement("span",{className:m&&m>0?"bold":void 0},t.nickname),t.id===(null==u?void 0:u.id)&&l.createElement("span",null," (나)"),m&&m>0&&l.createElement("span",{className:"count"},m)||null)};var h=n(2951);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?b(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const v=function(){var e=(0,i.UO)().workspace,t=(0,s.ZP)("/api/users",o.Z,{dedupingInterval:2e3}),n=t.data,r=(t.error,t.revalidate,t.mutate,(0,s.ZP)(n?"/api/workspaces/".concat(e,"/members"):null,o.Z).data),c=g((0,h.Z)(e),1)[0],u=g((0,l.useState)(!1),2),p=u[0],d=u[1],m=g((0,l.useState)([]),2),b=m[0],v=m[1],y=(0,l.useCallback)((function(){d((function(e){return!e}))}),[]);return(0,l.useEffect)((function(){console.log("DMList: workspace 바꼈다",e),v([])}),[e]),(0,l.useEffect)((function(){return null==c||c.on("onlineList",(function(e){v(e)})),function(){null==c||c.off("onlineList")}}),[c]),l.createElement(l.Fragment,null,l.createElement("h2",null,l.createElement(a,{collapse:p,onClick:y},l.createElement("i",{className:"c-icon p-channel_sidebar__section_heading_expand p-channel_sidebar__section_heading_expand--show_more_feature c-icon--caret-right c-icon--inherit c-icon--inline","data-qa":"channel-section-collapse","aria-hidden":"true"})),l.createElement("span",null,"Direct Messages")),l.createElement("div",null,!p&&(null==r?void 0:r.map((function(e){var t=b.includes(e.id);return l.createElement(f,{key:e.id,member:e,isOnline:t})})))))};var y=n(9250),x=n(5692),w=n(3046),k=n(8678),E=n(9669),C=n.n(E),Z=n(9249);function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const S=function(e){var t,n,r=e.show,a=e.onCloseModal,c=e.setShowInviteWorkspaceModal,u=(0,i.UO)().workspace,p=(t=(0,k.Z)(""),n=3,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),d=p[0],m=p[1],f=p[2],h=(0,s.ZP)("http://localhost:3095/api/users",o.Z).data,g=(0,s.ZP)(h?"http://localhost:3095/api/workspace/".concat(u,"/channels"):null,o.Z).revalidate,b=(0,l.useCallback)((function(e){e.preventDefault(),d&&d.trim()&&C().post("http://localhost:3095/api/workspace/".concat(u,"/members"),{email:d}).then((function(){g(),c(!1),f("")})).catch((function(e){var t;console.dir(e),Z.Am.error(null===(t=e.response)||void 0===t?void 0:t.data,{position:"bottom-center"})}))}),[u,d]);return l.createElement(x.Z,{show:r,onCloseModal:a},l.createElement("form",{onSubmit:b},l.createElement(w.__,{id:"member-label"},l.createElement("span",null,"Email"),l.createElement(w.II,{id:"member",type:"email",value:d,onChange:m})),l.createElement(w.zx,{type:"submit"},"Invite")))};var A=n(4911),I=function(e){var t=e.children,n=e.style,r=e.show,a=e.onCloseModal,o=e.closeButton,i=(0,l.useCallback)((function(e){e.stopPropagation()}),[]);return r?l.createElement(A.b,{onClick:a},l.createElement("div",{style:n,onClick:i},o&&l.createElement(A.f,{onClick:a},"×"),t)):null};I.defaultProps={closeButton:!0};const z=I;var M=(0,r.Z)("div",{target:"efhzxig13"})({name:"tjo4qw",styles:"float:right"}),j=(0,r.Z)("header",{target:"efhzxig12"})({name:"fvf0bi",styles:"height:38px;background:#350d36;color:#ffffff;box-shadow:0 1px 0 0 rgba(255, 255, 255, 0.1);padding:5px;text-align:center"}),P=(0,r.Z)("img",{target:"efhzxig11"})({name:"1ly4jlu",styles:"width:28px;height:28px;position:absolute;top:5px;right:16px"}),O=(0,r.Z)("div",{target:"efhzxig10"})({name:"47px7v",styles:"display:flex;padding:20px;& img{display:flex;}&>div{display:flex;flex-direction:column;margin-left:10px;}& #profile-name{font-weight:bold;display:inline-flex;}& #profile-active{font-size:13px;display:inline-flex;}"}),q=(0,r.Z)("button",{target:"efhzxig9"})({name:"bl1q1k",styles:"border:none;width:100%;border-top:1px solid rgb(29, 28, 29);background:transparent;display:block;height:33px;padding:5px 20px 5px;outline:none;cursor:pointer"}),U=(0,r.Z)("div",{target:"efhzxig8"})({name:"36bnqj",styles:"display:flex;flex:1"}),N=(0,r.Z)("div",{target:"efhzxig7"})({name:"17lvj7e",styles:"width:65px;display:inline-flex;flex-direction:column;align-items:center;background:#3f0e40;border-top:1px solid rgb(82, 38, 83);border-right:1px solid rgb(82, 38, 83);vertical-align:top;text-align:center;padding:15px 0 0"}),T=(0,r.Z)("nav",{target:"efhzxig6"})({name:"2pkygn",styles:"width:260px;display:inline-flex;flex-direction:column;background:#3f0e40;color:rgb(188, 171, 188);vertical-align:top;& a{padding-left:36px;color:inherit;text-decoration:none;height:28px;line-height:28px;display:flex;align-items:center;&.selected{color:white;}}& .bold{color:white;font-weight:bold;}& .count{margin-left:auto;background:#cd2553;border-radius:16px;display:inline-block;font-size:12px;font-weight:700;height:18px;line-height:18px;padding:0 9px;color:white;margin-right:16px;}& h2{height:36px;line-height:36px;margin:0;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;font-size:15px;}"}),D=(0,r.Z)("button",{target:"efhzxig5"})({name:"1rmthq7",styles:"height:64px;line-height:64px;border:none;width:100%;text-align:left;border-top:1px solid rgb(82, 38, 83);border-bottom:1px solid rgb(82, 38, 83);font-weight:900;font-size:24px;background:transparent;text-overflow:ellipsis;overflow:hidden;white-space:nowrap;padding:0;padding-left:16px;margin:0;color:white;cursor:pointer"}),$=(0,r.Z)("div",{target:"efhzxig4"})({name:"1146j5j",styles:"height:calc(100vh - 102px);overflow-y:auto"}),L=(0,r.Z)("div",{target:"efhzxig3"})({name:"192o1ir",styles:"padding:10px 0 0;& h2{padding-left:20px;}&>button{width:100%;height:28px;padding:4px;border:none;background:transparent;border-top:1px solid rgb(28, 29, 28);cursor:pointer;&:last-of-type{border-bottom:1px solid rgb(28, 29, 28);}}"}),W=(0,r.Z)("div",{target:"efhzxig2"})({name:"82a6rk",styles:"flex:1"}),B=(0,r.Z)("button",{target:"efhzxig1"})({name:"9tlmej",styles:"color:white;font-size:24px;display:inline-block;width:40px;height:40px;background:transparent;border:none;cursor:pointer"}),F=(0,r.Z)("button",{target:"efhzxig0"})({name:"wsqixl",styles:"display:inline-block;width:40px;height:40px;border-radius:10px;background:white;border:3px solid #3f0e40;margin-bottom:15px;font-size:18px;font-weight:700;color:black;cursor:pointer"}),H=n(3810),G=n(6182),J=n.n(G);function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}const Q=function(e){var t,n,r=e.show,a=e.onCloseModal,c=e.setShowCreateChannelModal,u=(t=(0,k.Z)(""),n=3,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return o}}(t,n)||function(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=u[0],d=u[1],m=u[2],f=(0,i.UO)(),h=f.workspace,g=(f.channel,(0,s.ZP)("http://localhost:3095/api/users",o.Z,{dedupingInterval:2e3})),b=g.data,v=(g.error,g.mutate,g.revalidate,(0,s.ZP)(b?"http://localhost:3095/api/workspaces/".concat(h,"/channels"):null,o.Z)),y=(v.data,v.revalidate),E=(0,l.useCallback)((function(e){e.preventDefault(),C().post("http://localhost:3095/api/workspaces/".concat(h,"/channels"),{name:p},{withCredentials:!0}).then((function(e){c(!1),y(),m("")})).catch((function(e){var t;console.dir(e),Z.Am.error(null===(t=e.response)||void 0===t?void 0:t.data,{position:"bottom-center"})}))}),[p]);return r?l.createElement(x.Z,{show:r,onCloseModal:a},l.createElement("form",{onSubmit:E},l.createElement(w.__,{id:"channel-label"},l.createElement("span",null,"Channel"),l.createElement(w.II,{id:"channel",value:p,onChange:d})),l.createElement(w.zx,{type:"submit"},"Create"))):null};function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],l=!0,i=!1;try{for(n=n.call(e);!(l=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);l=!0);}catch(e){i=!0,a=e}finally{try{l||null==n.return||n.return()}finally{if(i)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X=(0,H.ZP)((function(){return Promise.all([n.e(554),n.e(885),n.e(256)]).then(n.bind(n,5256))})),Y=(0,H.ZP)((function(){return Promise.all([n.e(554),n.e(885),n.e(474)]).then(n.bind(n,3474))}));const ee=function(){var e=R((0,l.useState)(!1),2),t=e[0],n=e[1],r=R((0,l.useState)(!1),2),a=r[0],u=r[1],p=R((0,l.useState)(!1),2),d=p[0],f=p[1],g=R((0,l.useState)(!1),2),b=g[0],E=g[1],_=R((0,l.useState)(!1),2),A=_[0],I=_[1],H=R((0,l.useState)(!1),2),G=H[0],K=H[1],V=R((0,k.Z)(""),3),ee=V[0],te=V[1],ne=V[2],re=R((0,k.Z)(""),3),ae=re[0],oe=re[1],le=re[2],ie=(0,i.UO)().workspace,ce=(0,s.ZP)("/api/users",o.Z,{dedupingInterval:2e3}),se=ce.data,ue=(ce.error,ce.revalidate),pe=ce.mutate,de=(0,s.ZP)(se?"/api/workspaces/".concat(ie,"/channels"):null,o.Z).data,me=((0,s.ZP)(se?"/api/workspaces/".concat(ie,"/members"):null,o.Z).data,R((0,h.Z)(ie),2)),fe=me[0],he=me[1];(0,l.useEffect)((function(){de&&se&&fe&&(console.log(fe),fe.emit("login",{id:se.id,channels:de.map((function(e){return e.id}))}))}),[fe,de,se]),(0,l.useEffect)((function(){return function(){he()}}),[ie,he]);var ge=(0,l.useCallback)((function(){C().post("/api/users/logout",null,{withCredentials:!0}).then((function(){pe(!1,!1)}))}),[pe]),be=(0,l.useCallback)((function(e){e.stopPropagation(),n(!1)}),[]),ve=(0,l.useCallback)((function(){n((function(e){return!e}))}),[]),ye=(0,l.useCallback)((function(){u(!0)}),[]),xe=(0,l.useCallback)((function(e){e.preventDefault(),ee&&ee.trim()&&ae&&ae.trim()&&C().post("/api/workspaces",{workspace:ee,url:ae},{withCredentials:!0}).then((function(){ue(),u(!1),ne(""),le("")})).catch((function(e){var t;console.dir(e),Z.Am.error(null===(t=e.response)||void 0===t?void 0:t.data,{position:"bottom-center"})}))}),[ee,ae]),we=(0,l.useCallback)((function(){u(!1),K(!1),f(!1),E(!1)}),[]),ke=(0,l.useCallback)((function(){I((function(e){return!e}))}),[]),Ee=(0,l.useCallback)((function(){K(!0)}),[]),Ce=(0,l.useCallback)((function(){f(!0)}),[]);return se?l.createElement("div",null,l.createElement(j,null,l.createElement(M,null,l.createElement("span",{onClick:ve},l.createElement(P,{src:J().url(se.email,{s:"28px",d:"retro"}),alt:se.nickname}),t&&l.createElement(z,{style:{right:0,top:38},show:t,onCloseModal:be},l.createElement(O,null,l.createElement("img",{src:J().url(se.nickname,{s:"36px",d:"retro"}),alt:se.nickname}),l.createElement("div",null,l.createElement("span",{id:"profile-name"},se.nickname),l.createElement("span",{id:"profile-active"},"Active"))),l.createElement(q,{onClick:ge},"로그아웃"))))),l.createElement(U,null,l.createElement(N,null,null==se?void 0:se.Workspaces.map((function(e){return l.createElement(c.rU,{key:e.id,to:"/workspace/".concat(123,"/channel/일반")},l.createElement(F,null,e.name.slice(0,1).toUpperCase()))})),l.createElement(B,{onClick:ye},"+")),l.createElement(T,null,l.createElement(D,{onClick:ke},"Sleact"),l.createElement($,null,l.createElement(z,{show:A,onCloseModal:ke,style:{top:95,left:80}},l.createElement(L,null,l.createElement("h2",null,"Sleact"),l.createElement("button",{onClick:Ce},"워크스페이스에 사용자 초대"),l.createElement("button",{onClick:Ee},"채널 만들기"),l.createElement("button",{onClick:ge},"로그아웃"))),l.createElement(m,null),l.createElement(v,null))),l.createElement(W,null,l.createElement(i.rs,null,l.createElement(i.AW,{path:"/workspace/:workspace/channel/:channel",component:X}),l.createElement(i.AW,{path:"/workspace/:workspace/dm/:id",component:Y})))),l.createElement(x.Z,{show:a,onCloseModal:we},l.createElement("form",{onSubmit:xe},l.createElement(w.__,{id:"workspace-label"},l.createElement("span",null,"워크스페이스 이름"),l.createElement(w.II,{id:"workspace",value:ee,onChange:te})),l.createElement(w.__,{id:"workspace-url-label"},l.createElement("span",null,"워크스페이스 url"),l.createElement(w.II,{id:"workspace",value:ae,onChange:oe})),l.createElement(w.zx,{type:"submit"},"생성하기"))),l.createElement(Q,{show:G,onCloseModal:we,setShowCreateChannelModal:K}),l.createElement(S,{show:d,onCloseModal:we,setShowInviteWorkspaceModal:f}),l.createElement(y.Z,{show:b,onCloseModal:we,setShowInviteChannelModal:E})):l.createElement(i.l_,{to:"/login"})}},7020:()=>{}}]);